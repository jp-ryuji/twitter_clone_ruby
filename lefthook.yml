# lefthook.yml
pre-commit:
  parallel: true
  commands:
    rubocop:
      tags: backend style
      run: bundle exec rubocop --force-exclusion {staged_files}
      glob: "*.rb"
      exclude:
        - "spec/fixtures/**/*"
        - "docs/**/*"
    eslint:
      tags: frontend style
      run: yarn run eslint {staged_files}
      glob: "*.{js,jsx,ts,tsx}"
    scss_lint:
      tags: frontend style
      run: bundle exec scss-lint {staged_files}
      glob: "*.scss"
    slim_lint:
      tags: frontend style
      run: bundle exec slim-lint {staged_files}
      glob: "*.slim"
    trailing_whitespace:
      tags: style
      run: |
        if grep -n '\s$' {staged_files} > /dev/null 2>&1; then
          echo "Trailing whitespace found in:"
          grep -n '\s$' {staged_files}
          exit 1
        fi
      glob: "*"
      exclude:
        - "spec/fixtures/**/*"
        - "docs/**/*"